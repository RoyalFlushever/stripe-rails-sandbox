<!-- app/views/payments/new.html.erb -->

<%= form_tag payments_path, method: 'post', id: 'payment-form' do %>
	<!-- <span class="payment-errors"></span> -->
	<div class="form-row">
		<label for="card-element">
			Credit or debit card
		</label>
		<div id="card-element">
			<!-- a Stripe element -->
		</div>		

		<!-- Used to display Element errors -->
		<div id="card-errors" role="alert"></div>
		<button type="submit">Submit Payment</button>
	</div>
	<script src="https://js.stripe.com/v3/"></script>
  <script>
  	var stripe = Stripe('<%= Rails.configuration.stripe[:publishable_key] %>');
  </script>
	<script>
		$(document).ready(function(){
			var elements = stripe.elements();

			// Custom styling can be passed to options when creating an Element.

			var style = {
				base: {
					// Add your base input styles here. For example:
					fontSize: '16px',
					color: "#32325d",
				}
			};

			// Create an instance of the card Element
			var card = elements.create('card', {style: style});

			// Add an instance of the card Element into the 'card-element'
			card.mount('#card-element');
		});
	</script>
<% end %>	
